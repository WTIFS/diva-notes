# 单体架构

单体架构的全部代码都在一个应用里，适合小型业务系统的研发。如果应用的复杂度低，单体架构易于开发、测试、部署和伸缩。但是，随着功能模块和研发人员的增加，单体架构面临众多问题：

- 故障扩散：如果某些功能模块发生异常，可能影响其他的功能模块。
- 扩展性差：只能扩展整个应用，不能单独扩展某些热点功能，存在资源浪费。
- 迭代效率低：不同功能无法独立迭代，任何改动都影响整个应用，增加开发、测试和发布成本。
- 技术栈单一：全部功能只能采用相同的技术栈开发，引入新技术和升级新版本的难度太大。



# 微服务架构

对于中型以上规模的业务系统来说，更适合采用分布式服务架构，例如：微信支付这种超大型系统涉及上百个功能模块和上千名研发人员，采用单体架构简直是个灾难。因此，需要将不同的功能拆成分布式服务，每个服务由少量研发人员独立维护。

分布式服务可以解决单体架构的问题，但是用起来并不容易，需要配套的基础设施：

- 本地函数调用变成远程服务调用，需要高效的网络请求框架。
- 网络请求需要解决服务寻址、故障容错和各种应用场景中的流量调度问题。
- 应用数量大幅增加，需要 CICD 流水线和发布平台简化应用的测试和运维工作。

微服务和分布式服务没有本质的区别，微服务更强调服务的粒度要细。在落地过程中，服务的粒度其实没有绝对的标准，要从实际问题出发选择合理方案，不要盲目追求微服务。

北极星致力于打造一个支持多语言、多框架的服务治理平台，帮助用户解决分布式服务或者微服务架构中的服务管理、流量管理、配置管理、故障容错和可观测性问题。



# 微服务划分

- **边界上下文**。微服务的粒度不能大于领域驱动里的 Bounded Context（具体是什么 大家自行 Google），也就是一个业务域。
- **单一职责，高内聚，低耦合**。把因为相同原因变化的合在一起（内聚），把不同原因变化的分开（解耦）
- **事务和一致性**。对于两个重度依赖的功能，需要完成一个事务和要保证强一致性的，最好不要拆开，要放在一起。
- **跟组织架构匹配**。把同一个团队的东西放在一起，不同团队的分开。



# 参考

[北极星架构](https://polarismesh.cn/docs/%E5%8C%97%E6%9E%81%E6%98%9F%E6%98%AF%E4%BB%80%E4%B9%88/%E7%AE%80%E4%BB%8B/)

[陈皓 - 是微服务架构不香还是云不香](https://coolshell.cn/articles/22422.html)