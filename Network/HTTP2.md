# 多路复用的单一长连接
##### 1.单一长连接

在 `HTTP2` 中，客户端向某个域名的服务器请求页面的过程中，只会创建一条 `TCP` 连接，即使这页面可能包含上百个资源。  单一的连接应该是 `HTTP2` 的主要优势，能减少 `TCP` 握手带来的时延，并节省新建和维持连接的开销 ，提高了吞吐量。



##### 2.多路复用

这个其实类似 `TCP` 的 `Nagle` 算法，可以一次请求打包发送多条数据。

`HTTP2` 虽然只有一条 `TCP` 连接，但是在逻辑上分成了很多帧。 

`HTTP2` 把要传输的信息分割成一个个二进制帧，首部信息会被封装到 `HEADER Frame`，相应的请求体放到 `DATA Frame`。



<img src="assets/b1e608ddb7493608efea3e76912aabe1_1440w.jpg" alt="img" style="zoom: 50%;" />





![img](assets/906e22193e61cd561325d93aae0f1e07_1440w.jpg)



# 头部压缩和二进制格式

`HTTP1.x` 一直都是 `plain text`，对此我只能想到一个优点，便于阅读和 debug。但是，现在很多都走 `HTTPS`，`SSL` 把 `plain text` 变成了二进制，那这个优点也没了。

于是 `HTTP2` 搞了个 `HPACK` 压缩算法来压缩头部，减少报文大小（不过调试将变得麻烦）。



# 服务端推动 Sever Push

这个功能通常被称作 **缓存推送**。主要的思想是：当一个客户端请求资源X，而服务器知道它很可能也需要资源Z的情况下，服务器可以在客户端发送请求前，主动将资源Z推送给客户端。





[腾讯云加社区 - HTTP/2 相比 1.0 有哪些重大改进](https://www.zhihu.com/question/34074946/answer/157909115)