# 4S分析法

- Senario：场景、特征
    - 问清楚需要的功能，节选核心功能来实现
    - 现有的架构是什么样子？服务器、数据库、缓存之间的关系及数量
    - 访问量、并发用户数、数据量、空间使用量；读频率、写频率；现有瓶颈、压力
    - 分析服务特征
- Service：服务拆分
- Storage：存储
    - 不同的服务使用不同的存储，如推特的用户服务用 MySQL，推文服务用 Mongo，图片服务用 S3
- Scale：扩展、分片、优化



#### 如何保证服务的高并发？

- 前端
  - 防重复提交，请求限频
  - 合并短时间内的连续请求
- 后端
  - 逻辑尽可能异步化处理
  - 多级缓存，本地缓存 + 分布式缓存
  - 分片 + 负载均衡，服务分片、缓存分片、数据库分片
  - 静态资源用 `CDN` 加速



#### 如何保证服务的高可用？

- 分布式、集群、负载均衡、弹性（应用层、缓存层、持久层）
- 监控、报警
- 限流、熔断、降级
- 接入层做鉴权
- 服务器做数据校验
- `redis` 使用集群模式、开启持久化
- 数据库做主备、异地容灾

